(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{pEFl:function(n,t,l){"use strict";l.r(t);var e=l("CcnG"),o=function(){return function(){}}(),u=l("NcP4"),i=l("pMnS"),a=l("FRvc"),c=l("v9Dh"),r=l("eDkP"),s=l("qAlS"),h=l("dWZg"),p=l("lLAP"),b=l("Fzqc"),d=l("ZYjt"),g=l("ZYCi"),f=l("Mr+X"),w=l("SMsm"),m=l("mrSG"),y=function(){function n(){this.users=[],this.pulseMe=-1,this.pulseMeStart=!0}return n.prototype.focusInput=function(){this.input.nativeElement.focus()},n.prototype.ngOnInit=function(){this.canvas=this.chat.nativeElement,this.context=this.canvas.getContext("2d");for(var n=0;n<12;n++)this.users[n]={avatar:String.fromCodePoint(128512+Math.floor(55*Math.random())),nickname:"Nickname"};this.canvasRender(),this.focusInput()},n.prototype.render=function(){var n=this,t=this.canvas;this.context.clearRect(0,0,t.width,t.height),this.users.forEach(function(t){var l=t.coords,e=t.iconSize,o=t.avatar;if(t.isMe){var u=.85*e+n.pulseMe;n.context.beginPath(),n.context.arc(l.x+.68*e,l.y-.33*e,u,0,2*Math.PI),n.context.strokeStyle="white";var i=.7*e,a=2*Math.PI*u;n.context.setLineDash([i,(a-4*i)/4]),n.context.stroke(),n.pulseMeStart?n.pulseMe+=.05:n.pulseMe-=.05,n.pulseMe>1?n.pulseMeStart=!1:n.pulseMe<-1&&(n.pulseMeStart=!0)}n.context.fillStyle="#fff",n.context.font=e+"px icon",n.context.fillText(o,l.x,l.y)}),requestAnimationFrame(this.render.bind(this))},n.prototype.canvasRender=function(){this.calculateRandomPositions(),requestAnimationFrame(this.render.bind(this))},n.prototype.updateCanvasSize=function(){return this.canvas.width=this.section.nativeElement.clientWidth,this.canvas.height=this.section.nativeElement.clientHeight,[this.canvas.width,this.canvas.height]},n.prototype.getColumnsAndRows=function(n,t){for(var l=1,e=1;l*e<t;)l/e==1?n<1?e+=1:l+=1:l/e<n?l+=1:e+=1;return[l,e]},n.prototype.getStep=function(n,t){var l,e=t.columns,o=t.rows,u=t.padding,i=t.size;return"x"===n?l=(t.width-2*u-i)/(e-1||e):"y"===n&&(l=(t.height-2*u-i)/(o-1||o)),l},n.prototype.calculateRandomPositions=function(){for(var n=this.updateCanvasSize(),t=n[0],l=n[1],e=this.users.length,o=this.getColumnsAndRows(t/l,e),u=o[0],i=o[1],a=20+l/i/3,c=(l-2*a)/i/3,r=this.getStep("x",{width:t,height:l,columns:u,rows:i,padding:a,size:c}),s=this.getStep("y",{width:t,height:l,columns:u,rows:i,padding:a,size:c}),h=0,p=a+c/2;p<=l-a&&h<e;p+=s)for(var b=a+c/2;b<=t-a&&h<e;b+=r){var d=1.7*c,g=.7*c,f=Math.floor(Math.random()*(d-g))+g,w={x:b-1.37*f/2,y:p+.7*f/2};w.x+=Math.floor(Math.random()*(c/5*4))-c/5*2,w.y+=Math.floor(Math.random()*(c/5*4))-c/5*2,this.users[h]=m.a({},this.users[h],{coords:w,iconSize:f,isMe:Boolean(2===h)}),h+=1}},n}(),M=e.nb({encapsulation:0,styles:[a.a,["header[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;padding:35px;background:rgba(28,31,31,.6);height:126px;font-size:14px}header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex-grow:1;margin-left:15px}header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:300;font-size:24px}header[_ngcontent-%COMP%]   .edit-emoji[_ngcontent-%COMP%]{font-size:36px;line-height:1;display:flex;align-items:center}header[_ngcontent-%COMP%]   .edit-emoji[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:10px}[_nghost-%COMP%] > section[_ngcontent-%COMP%]{padding:0;overflow:hidden}canvas[_ngcontent-%COMP%]{flex-grow:1}footer[_ngcontent-%COMP%]{font-size:16px;background:rgba(28,31,31,.6);display:flex}footer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1;padding:10px 15px;background:0 0;border:none;outline:0;font-size:14px;color:#fff}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 15px}"]],data:{}});function v(n){return e.Gb(0,[e.Cb(402653184,1,{section:0}),e.Cb(402653184,2,{chat:0}),e.Cb(402653184,3,{input:0}),(n()(),e.pb(3,0,null,null,16,"header",[],null,null,null,null,null)),(n()(),e.pb(4,16777216,null,null,5,"button",[["color","accent"],["matTooltip","Go to home page"],["routerLink","/"]],null,[[null,"longpress"],[null,"keydown"],[null,"touchend"],[null,"click"]],function(n,t,l){var o=!0;return"longpress"===t&&(o=!1!==e.yb(n,5).show()&&o),"keydown"===t&&(o=!1!==e.yb(n,5)._handleKeydown(l)&&o),"touchend"===t&&(o=!1!==e.yb(n,5)._handleTouchend()&&o),"click"===t&&(o=!1!==e.yb(n,6).onClick()&&o),o},null,null)),e.ob(5,147456,null,0,c.d,[r.a,e.k,s.b,e.Q,e.A,h.a,p.b,p.c,c.b,[2,b.b],[2,c.a],[2,d.h]],{position:[0,"position"],message:[1,"message"]},null),e.ob(6,16384,null,0,g.r,[g.q,g.a,[8,null],e.F,e.k],{routerLink:[0,"routerLink"]},null),(n()(),e.pb(7,0,null,null,2,"mat-icon",[["aria-label","Go to home page"],["class","mat-icon"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,f.b,f.a)),e.ob(8,9158656,null,0,w.b,[e.k,w.d,[8,null],[2,w.a]],null,null),(n()(),e.Eb(-1,0,["arrow_back"])),(n()(),e.pb(10,0,null,null,4,"div",[["class","title"]],null,null,null,null,null)),(n()(),e.pb(11,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),e.Eb(-1,null,[" Emoji Chat "])),(n()(),e.pb(13,0,null,null,1,"small",[],null,null,null,null,null)),(n()(),e.Eb(-1,null,["canvas, websockets (socket.io)"])),(n()(),e.pb(15,0,null,null,4,"div",[["class","edit-emoji"]],null,null,null,null,null)),(n()(),e.Eb(-1,null,[" \ud83d\ude00 "])),(n()(),e.pb(17,16777216,null,null,2,"button",[["matTooltip","Edit your Emoji"]],null,[[null,"longpress"],[null,"keydown"],[null,"touchend"]],function(n,t,l){var o=!0;return"longpress"===t&&(o=!1!==e.yb(n,18).show()&&o),"keydown"===t&&(o=!1!==e.yb(n,18)._handleKeydown(l)&&o),"touchend"===t&&(o=!1!==e.yb(n,18)._handleTouchend()&&o),o},null,null)),e.ob(18,147456,null,0,c.d,[r.a,e.k,s.b,e.Q,e.A,h.a,p.b,p.c,c.b,[2,b.b],[2,c.a],[2,d.h]],{position:[0,"position"],message:[1,"message"]},null),(n()(),e.Eb(-1,null,[" Edit your Emoji "])),(n()(),e.pb(20,0,[[1,0],["section",1]],null,1,"section",[],null,[[null,"click"]],function(n,t,l){var e=!0;return"click"===t&&(e=!1!==n.component.focusInput()&&e),e},null,null)),(n()(),e.pb(21,0,[[2,0],["chat",1]],null,0,"canvas",[],null,null,null,null,null)),(n()(),e.pb(22,0,null,null,3,"footer",[],null,null,null,null,null)),(n()(),e.pb(23,0,[[3,0],["input",1]],null,0,"input",[["type","text"]],null,null,null,null,null)),(n()(),e.pb(24,0,null,null,1,"button",[],null,null,null,null,null)),(n()(),e.Eb(-1,null,["Send"]))],function(n,t){n(t,5,0,"right","Go to home page"),n(t,6,0,"/"),n(t,8,0),n(t,18,0,"below","Edit your Emoji")},function(n,t){n(t,7,0,e.yb(t,8).inline,"primary"!==e.yb(t,8).color&&"accent"!==e.yb(t,8).color&&"warn"!==e.yb(t,8).color)})}function x(n){return e.Gb(0,[(n()(),e.pb(0,0,null,null,1,"app-emoji-chat",[],null,[["window","resize"]],function(n,t,l){var o=!0;return"window:resize"===t&&(o=!1!==e.yb(n,1).canvasRender(l)&&o),o},v,M)),e.ob(1,114688,null,0,y,[],null,null)],function(n,t){n(t,1,0)},null)}var C=e.lb("app-emoji-chat",y,x,{},{},[]),k=l("Ip0R"),P=l("M2Lx"),_=l("Wf4p"),E=l("UodH"),O=l("4c35");l.d(t,"EmojiChatModuleNgFactory",function(){return S});var S=e.mb(o,[],function(n){return e.vb([e.wb(512,e.j,e.cb,[[8,[u.a,i.c,C]],[3,e.j],e.y]),e.wb(4608,k.p,k.o,[e.v,[2,k.A]]),e.wb(4608,P.a,P.a,[]),e.wb(4608,r.a,r.a,[r.f,r.b,e.j,r.e,r.c,e.r,e.A,k.d,b.b,[2,k.h]]),e.wb(5120,r.g,r.h,[r.a]),e.wb(5120,c.b,c.c,[r.a]),e.wb(4608,d.g,_.a,[[2,_.c],[2,_.e]]),e.wb(1073742336,k.c,k.c,[]),e.wb(1073742336,b.a,b.a,[]),e.wb(1073742336,_.e,_.e,[[2,_.b],[2,d.h]]),e.wb(1073742336,h.b,h.b,[]),e.wb(1073742336,_.g,_.g,[]),e.wb(1073742336,E.c,E.c,[]),e.wb(1073742336,w.c,w.c,[]),e.wb(1073742336,P.b,P.b,[]),e.wb(1073742336,p.a,p.a,[]),e.wb(1073742336,O.c,O.c,[]),e.wb(1073742336,s.c,s.c,[]),e.wb(1073742336,r.d,r.d,[]),e.wb(1073742336,c.e,c.e,[]),e.wb(1073742336,g.t,g.t,[[2,g.z],[2,g.q]]),e.wb(1073742336,o,o,[]),e.wb(1024,g.n,function(){return[[{path:"",component:y}]]},[])])})}}]);