(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{pEFl:function(n,t,l){"use strict";l.r(t);var e=l("CcnG"),o=function(){return function(){}}(),i=l("NcP4"),a=l("pMnS"),u=l("FRvc"),r=l("bujt"),c=l("UodH"),s=l("dWZg"),b=l("lLAP"),d=l("wFw1"),h=l("v9Dh"),p=l("eDkP"),g=l("qAlS"),f=l("Fzqc"),m=l("ZYjt"),y=l("ZYCi"),w=l("Ip0R"),v=l("Mr+X"),M=l("SMsm"),x=l("mrSG"),k=function(){function n(){this.users=[],this.pulseMe=-1,this.pulseMeStart=!0}return n.prototype.focusInput=function(){this.input.nativeElement.focus()},n.prototype.ngOnInit=function(){this.canvas=this.chat.nativeElement,this.context=this.canvas.getContext("2d");for(var n=0;n<12;n++)this.users[n]={avatar:String.fromCodePoint(128512+Math.floor(55*Math.random())),nickname:"Nickname"};this.canvasRender(),this.focusInput()},n.prototype.render=function(){var n=this,t=this.canvas;this.context.clearRect(0,0,t.width,t.height),this.users.forEach(function(t){var l=t.coords,e=t.iconSize,o=t.avatar;if(t.isMe){var i=.85*e+n.pulseMe;n.context.beginPath(),n.context.arc(l.x+.68*e,l.y-.33*e,i,0,2*Math.PI),n.context.strokeStyle="white";var a=.7*e,u=2*Math.PI*i;n.context.setLineDash([a,(u-4*a)/4]),n.context.stroke(),n.pulseMeStart?n.pulseMe+=.05:n.pulseMe-=.05,n.pulseMe>1?n.pulseMeStart=!1:n.pulseMe<-1&&(n.pulseMeStart=!0)}n.context.fillStyle="#fff",n.context.font=e+"px icon",n.context.fillText(o,l.x,l.y)}),requestAnimationFrame(this.render.bind(this))},n.prototype.canvasRender=function(){this.calculateRandomPositions(),requestAnimationFrame(this.render.bind(this))},n.prototype.updateCanvasSize=function(){return this.canvas.width=this.section.nativeElement.clientWidth,this.canvas.height=this.section.nativeElement.clientHeight,[this.canvas.width,this.canvas.height]},n.prototype.getColumnsAndRows=function(n,t){for(var l=1,e=1;l*e<t;)l/e==1?n<1?e+=1:l+=1:l/e<n?l+=1:e+=1;return[l,e]},n.prototype.getStep=function(n,t){var l,e=t.columns,o=t.rows,i=t.padding,a=t.size;return"x"===n?l=(t.width-2*i-a)/(e-1||e):"y"===n&&(l=(t.height-2*i-a)/(o-1||o)),l},n.prototype.calculateRandomPositions=function(){var n=this.updateCanvasSize(),t=n[0],l=n[1],e=this.users.length,o=this.getColumnsAndRows(t/l,e),i=o[0],a=o[1],u=20+l/a/3,r=(l-2*u)/a/3,c=this.getStep("x",{width:t,height:l,columns:i,rows:a,padding:u,size:r}),s=this.getStep("y",{width:t,height:l,columns:i,rows:a,padding:u,size:r}),b=0;console.log({padding:u,size:r,height:l});for(var d=u+r/2;d<=l-u&&b<e;d+=s)for(var h=u+r/2;h<=t-u&&b<e;h+=c){var p=1.7*r,g=.7*r,f=Math.floor(Math.random()*(p-g))+g,m={x:h-1.37*f/2,y:d+.7*f/2};m.x+=Math.floor(Math.random()*(r/5*4))-r/5*2,m.y+=Math.floor(Math.random()*(r/5*4))-r/5*2,this.users[b]=x.a({},this.users[b],{coords:m,iconSize:f,isMe:Boolean(2===b)}),b+=1}},n}(),C=e.nb({encapsulation:0,styles:[u.a,["header[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;padding:35px;background:rgba(28,31,31,.6);height:126px;font-size:14px}header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex-grow:1;margin-left:15px}header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:300;font-size:24px}header[_ngcontent-%COMP%]   .edit-emoji[_ngcontent-%COMP%]{font-size:36px;line-height:1;display:flex;align-items:center}header[_ngcontent-%COMP%]   .edit-emoji[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:10px}[_nghost-%COMP%] > section[_ngcontent-%COMP%]{padding:0;overflow:hidden}canvas[_ngcontent-%COMP%]{flex-grow:1}footer[_ngcontent-%COMP%]{font-size:16px;background:rgba(28,31,31,.6);display:flex}footer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1;padding:10px 15px;background:0 0;border:none;outline:0;font-size:14px;color:#fff}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 15px}"]],data:{}});function _(n){return e.Gb(0,[e.Cb(402653184,1,{section:0}),e.Cb(402653184,2,{chat:0}),e.Cb(402653184,3,{input:0}),(n()(),e.pb(3,0,null,null,19,"header",[],null,null,null,null,null)),(n()(),e.pb(4,16777216,null,null,6,"a",[["color","accent"],["mat-raised-button",""],["matTooltip","Go to home page"],["routerLink","/"]],[[1,"tabindex",0],[1,"disabled",0],[1,"aria-disabled",0],[2,"_mat-animation-noopable",null],[1,"target",0],[8,"href",4]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],function(n,t,l){var o=!0;return"click"===t&&(o=!1!==e.yb(n,5)._haltDisabledEvents(l)&&o),"longpress"===t&&(o=!1!==e.yb(n,6).show()&&o),"keydown"===t&&(o=!1!==e.yb(n,6)._handleKeydown(l)&&o),"touchend"===t&&(o=!1!==e.yb(n,6)._handleTouchend()&&o),"click"===t&&(o=!1!==e.yb(n,7).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&o),o},r.b,r.a)),e.ob(5,180224,null,0,c.a,[s.a,b.c,e.k,[2,d.a]],{color:[0,"color"]},null),e.ob(6,147456,null,0,h.d,[p.a,e.k,g.b,e.Q,e.A,s.a,b.b,b.c,h.b,[2,f.b],[2,h.a],[2,m.h]],{position:[0,"position"],message:[1,"message"]},null),e.ob(7,671744,null,0,y.r,[y.q,y.a,w.i],{routerLink:[0,"routerLink"]},null),(n()(),e.pb(8,0,null,0,2,"mat-icon",[["aria-label","Go to home page"],["class","mat-icon"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,v.b,v.a)),e.ob(9,9158656,null,0,M.b,[e.k,M.d,[8,null],[2,M.a]],null,null),(n()(),e.Eb(-1,0,["arrow_back"])),(n()(),e.pb(11,0,null,null,4,"div",[["class","title"]],null,null,null,null,null)),(n()(),e.pb(12,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),e.Eb(-1,null,[" Emoji Chat "])),(n()(),e.pb(14,0,null,null,1,"small",[],null,null,null,null,null)),(n()(),e.Eb(-1,null,["canvas, websockets (socket.io)"])),(n()(),e.pb(16,0,null,null,6,"div",[["class","edit-emoji"]],null,null,null,null,null)),(n()(),e.Eb(-1,null,[" \ud83d\ude00 "])),(n()(),e.pb(18,16777216,null,null,4,"a",[["mat-raised-button",""],["matTooltip","Edit your Emoji"],["routerLink","/"]],[[1,"tabindex",0],[1,"disabled",0],[1,"aria-disabled",0],[2,"_mat-animation-noopable",null],[1,"target",0],[8,"href",4]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],function(n,t,l){var o=!0;return"click"===t&&(o=!1!==e.yb(n,19)._haltDisabledEvents(l)&&o),"longpress"===t&&(o=!1!==e.yb(n,20).show()&&o),"keydown"===t&&(o=!1!==e.yb(n,20)._handleKeydown(l)&&o),"touchend"===t&&(o=!1!==e.yb(n,20)._handleTouchend()&&o),"click"===t&&(o=!1!==e.yb(n,21).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&o),o},r.b,r.a)),e.ob(19,180224,null,0,c.a,[s.a,b.c,e.k,[2,d.a]],null,null),e.ob(20,147456,null,0,h.d,[p.a,e.k,g.b,e.Q,e.A,s.a,b.b,b.c,h.b,[2,f.b],[2,h.a],[2,m.h]],{position:[0,"position"],message:[1,"message"]},null),e.ob(21,671744,null,0,y.r,[y.q,y.a,w.i],{routerLink:[0,"routerLink"]},null),(n()(),e.Eb(-1,0,[" Edit your Emoji "])),(n()(),e.pb(23,0,[[1,0],["section",1]],null,1,"section",[],null,[[null,"click"]],function(n,t,l){var e=!0;return"click"===t&&(e=!1!==n.component.focusInput()&&e),e},null,null)),(n()(),e.pb(24,0,[[2,0],["chat",1]],null,0,"canvas",[],null,null,null,null,null)),(n()(),e.pb(25,0,null,null,3,"footer",[],null,null,null,null,null)),(n()(),e.pb(26,0,[[3,0],["input",1]],null,0,"input",[["type","text"]],null,null,null,null,null)),(n()(),e.pb(27,0,null,null,1,"button",[],null,null,null,null,null)),(n()(),e.Eb(-1,null,["Send"]))],function(n,t){n(t,5,0,"accent"),n(t,6,0,"right","Go to home page"),n(t,7,0,"/"),n(t,9,0),n(t,20,0,"below","Edit your Emoji"),n(t,21,0,"/")},function(n,t){n(t,4,0,e.yb(t,5).disabled?-1:e.yb(t,5).tabIndex||0,e.yb(t,5).disabled||null,e.yb(t,5).disabled.toString(),"NoopAnimations"===e.yb(t,5)._animationMode,e.yb(t,7).target,e.yb(t,7).href),n(t,8,0,e.yb(t,9).inline,"primary"!==e.yb(t,9).color&&"accent"!==e.yb(t,9).color&&"warn"!==e.yb(t,9).color),n(t,18,0,e.yb(t,19).disabled?-1:e.yb(t,19).tabIndex||0,e.yb(t,19).disabled||null,e.yb(t,19).disabled.toString(),"NoopAnimations"===e.yb(t,19)._animationMode,e.yb(t,21).target,e.yb(t,21).href)})}function P(n){return e.Gb(0,[(n()(),e.pb(0,0,null,null,1,"app-emoji-chat",[],null,[["window","resize"]],function(n,t,l){var o=!0;return"window:resize"===t&&(o=!1!==e.yb(n,1).canvasRender(l)&&o),o},_,C)),e.ob(1,114688,null,0,k,[],null,null)],function(n,t){n(t,1,0)},null)}var E=e.lb("app-emoji-chat",k,P,{},{},[]),S=l("M2Lx"),O=l("Wf4p"),j=l("4c35");l.d(t,"EmojiChatModuleNgFactory",function(){return z});var z=e.mb(o,[],function(n){return e.vb([e.wb(512,e.j,e.cb,[[8,[i.a,a.c,E]],[3,e.j],e.y]),e.wb(4608,w.p,w.o,[e.v,[2,w.A]]),e.wb(4608,S.a,S.a,[]),e.wb(4608,p.a,p.a,[p.f,p.b,e.j,p.e,p.c,e.r,e.A,w.d,f.b,[2,w.h]]),e.wb(5120,p.g,p.h,[p.a]),e.wb(5120,h.b,h.c,[p.a]),e.wb(4608,m.g,O.a,[[2,O.c],[2,O.e]]),e.wb(1073742336,w.c,w.c,[]),e.wb(1073742336,f.a,f.a,[]),e.wb(1073742336,O.e,O.e,[[2,O.b],[2,m.h]]),e.wb(1073742336,s.b,s.b,[]),e.wb(1073742336,O.g,O.g,[]),e.wb(1073742336,c.c,c.c,[]),e.wb(1073742336,M.c,M.c,[]),e.wb(1073742336,S.b,S.b,[]),e.wb(1073742336,b.a,b.a,[]),e.wb(1073742336,j.c,j.c,[]),e.wb(1073742336,g.c,g.c,[]),e.wb(1073742336,p.d,p.d,[]),e.wb(1073742336,h.e,h.e,[]),e.wb(1073742336,y.s,y.s,[[2,y.y],[2,y.q]]),e.wb(1073742336,o,o,[]),e.wb(1024,y.n,function(){return[[{path:"",component:k}]]},[])])})}}]);